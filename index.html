<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Government Infobox Generator</title>

<style>
body {
  font-family: Arial, Helvetica, sans-serif;
  background: #f2f2f2;
  padding: 20px;
  display: flex;
  gap: 30px;
}

.panel {
  width: 420px;
  background: #fff;
  border: 1px solid #aaa;
  padding: 15px;
}

.panel h2 {
  margin-top: 0;
}

label {
  font-size: 13px;
  display: block;
  margin-top: 8px;
}

input[type="text"],
input[type="number"] {
  width: 100%;
  box-sizing: border-box;
}

.party {
  border-top: 1px solid #ddd;
  margin-top: 10px;
  padding-top: 10px;
}

button {
  margin-top: 10px;
  padding: 6px 10px;
  cursor: pointer;
}

.infobox {
  width: 420px;
  background: #fff;
  border: 1px solid #999;
  padding: 15px;
}

.majority-bar-container {
  position: relative;
  height: 26px;
  background: #e0e0e0;
  border: 1px solid #888;
}

.majority-bar {
  display: flex;
  height: 100%;
}

.majority-line {
  position: absolute;
  top: -4px;
  bottom: -4px;
  width: 2px;
  background: black;
}

.legend {
  font-size: 13px;
  margin-top: 8px;
}

.legend-item {
  display: flex;
  align-items: center;
}

.legend-color {
  width: 14px;
  height: 14px;
  margin-right: 6px;
}
</style>
</head>

<body>

<!-- ===================== -->
<!-- EINGABEPANEL -->
<!-- ===================== -->
<div class="panel">
  <h2>Eingaben</h2>

  <label>Regierungsname</label>
  <input id="govName" value="Schwarz-Gelbe Koalition">

  <label>Regierungschef</label>
  <input id="govLeader" value="Bundeskanzler X">

  <label>Parlament</label>
  <input id="parliamentName" value="Deutscher Bundestag">

  <label>Sitze gesamt</label>
  <input id="totalSeats" type="number" value="630">

  <label>Mehrheitsschwelle</label>
  <input id="majoritySeats" type="number" value="316">

  <div id="parties"></div>

  <button onclick="addParty()">‚ûï Partei hinzuf√ºgen</button>
  <button onclick="render()">üîÑ Infobox aktualisieren</button>
</div>

<!-- ===================== -->
<!-- INFOBOX -->
<!-- ===================== -->
<div class="infobox">
  <h2 id="outName"></h2>
  <div><strong>Regierungschef:</strong> <span id="outLeader"></span></div>
  <div><strong>Parlament:</strong> <span id="outParliament"></span></div>

  <h3>Koalitionsmehrheit</h3>
  <div class="majority-bar-container">
    <div class="majority-bar" id="bar"></div>
    <div class="majority-line" id="line"></div>
  </div>

  <div class="legend" id="legend"></div>
</div>

<script>
let partyCount = 0;

function addParty(name="", seats=0, color="#cccccc", coalition=false) {
  const div = document.createElement("div");
  div.className = "party";

  div.innerHTML = `
    <label>Partei</label>
    <input class="p-name" value="${name}">

    <label>Sitze</label>
    <input class="p-seats" type="number" value="${seats}">

    <label>Farbe</label>
    <input class="p-color" type="color" value="${color}">

    <label>
      <input class="p-coalition" type="checkbox" ${coalition ? "checked" : ""}>
      Teil der Koalition
    </label>
  `;

  document.getElementById("parties").appendChild(div);
  partyCount++;
}

function render() {
  const totalSeats = Number(document.getElementById("totalSeats").value);
  const majoritySeats = Number(document.getElementById("majoritySeats").value);

  document.getElementById("outName").textContent =
    document.getElementById("govName").value;
  document.getElementById("outLeader").textContent =
    document.getElementById("govLeader").value;
  document.getElementById("outParliament").textContent =
    document.getElementById("parliamentName").value;

  const bar = document.getElementById("bar");
  const legend = document.getElementById("legend");
  bar.innerHTML = "";
  legend.innerHTML = "";

  const parties = [...document.querySelectorAll(".party")].map(p => ({
    name: p.querySelector(".p-name").value,
    seats: Number(p.querySelector(".p-seats").value),
    color: p.querySelector(".p-color").value,
    coalition: p.querySelector(".p-coalition").checked
  })).filter(p => p.coalition);

  parties.sort((a,b) => b.seats - a.seats);

  let coalitionSeats = 0;

  parties.forEach(p => {
    coalitionSeats += p.seats;
    const seg = document.createElement("div");
    seg.style.width = (p.seats / totalSeats * 100) + "%";
    seg.style.background = p.color;
    bar.appendChild(seg);

    const item = document.createElement("div");
    item.className = "legend-item";
    item.innerHTML = `
      <div class="legend-color" style="background:${p.color}"></div>
      ${p.name} ‚Äì ${p.seats} Sitze
    `;
    legend.appendChild(item);
  });

  document.getElementById("line").style.left =
    (majoritySeats / totalSeats * 100) + "%";

  const res = document.createElement("div");
  res.innerHTML =
    coalitionSeats >= majoritySeats
      ? `‚úÖ Mehrheit (${coalitionSeats} Sitze)`
      : `‚ùå Keine Mehrheit (${coalitionSeats} Sitze)`;
  legend.appendChild(res);
}

// Startwerte
addParty("CDU/CSU", 283, "#000000", true);
addParty("FDP", 44, "#ffed00", true);
addParty("SPD", 206, "#e3000f", false);
addParty("Gr√ºne", 118, "#1aa037", false);
render();
</script>

</body>
</html>
